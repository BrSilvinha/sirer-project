{"ast":null,"code":"var _jsxFileName = \"D:\\\\Proyecto-Silva-SIRER\\\\sirer-project\\\\frontend\\\\src\\\\components\\\\cajero\\\\CuentasPendientes.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Container, Row, Col, Card, Badge, Button, Modal, Form, Table, Spinner, InputGroup, ButtonGroup } from 'react-bootstrap';\nimport { pedidosService, mesasService } from '../../services/api';\nimport { useSocket } from '../../context/SocketContext';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CuentasPendientes = () => {\n  _s();\n  const [mesasConCuentas, setMesasConCuentas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showPagoModal, setShowPagoModal] = useState(false);\n  const [cuentaSeleccionada, setCuentaSeleccionada] = useState(null);\n  const [metodoPago, setMetodoPago] = useState('efectivo');\n  const [montoRecibido, setMontoRecibido] = useState('');\n  const [observacionesPago, setObservacionesPago] = useState('');\n  const [procesandoPago, setProcesandoPago] = useState(false);\n  const [filtroMonto, setFiltroMonto] = useState('todos');\n  const [estadisticas, setEstadisticas] = useState({\n    total_mesas: 0,\n    total_a_cobrar: 0,\n    promedio_cuenta: 0,\n    mesa_mayor: null\n  });\n\n  // ðŸ”Œ Hook de Socket.io\n  const {\n    isConnected,\n    on,\n    off,\n    emit\n  } = useSocket();\n  const resetFormularioPago = useCallback(() => {\n    setCuentaSeleccionada(null);\n    setMetodoPago('efectivo');\n    setMontoRecibido('');\n    setObservacionesPago('');\n  }, []);\n  const verificarCuentasMesas = useCallback(async mesas => {\n    const mesasConCuentasData = [];\n\n    // Filtrar mesas que podrÃ­an tener cuentas pendientes\n    const mesasCandidatas = mesas.filter(mesa => mesa.estado === 'cuenta_solicitada' || mesa.estado === 'ocupada');\n\n    // âœ… PROCESAMIENTO PARALELO MASIVO - Sin esperas entre lotes\n    const promesasTodasLasMesas = mesasCandidatas.map(async mesa => {\n      try {\n        const cuentaResponse = await pedidosService.getCuenta(mesa.id);\n        return {\n          mesa,\n          cuenta: cuentaResponse.data.data\n        };\n      } catch (error) {\n        return null; // Mesa sin cuenta pendiente\n      }\n    });\n\n    // âœ… EJECUTAR TODAS LAS CONSULTAS AL MISMO TIEMPO\n    const resultados = await Promise.all(promesasTodasLasMesas);\n\n    // Filtrar solo las mesas con cuentas vÃ¡lidas\n    resultados.forEach(resultado => {\n      if (resultado) {\n        mesasConCuentasData.push(resultado);\n      }\n    });\n    return mesasConCuentasData;\n  }, []);\n  const fetchMesasConCuentas = useCallback(async (esActualizacionManual = false) => {\n    // âœ… NO mostrar loading en actualizaciones automÃ¡ticas\n\n    try {\n      if (esActualizacionManual) {\n        setLoading(true);\n      }\n\n      // Obtener todas las mesas activas\n      const mesasResponse = await mesasService.getAll();\n      const todasLasMesas = mesasResponse.data.data;\n\n      // Filtrar mesas activas que podrÃ­an tener cuentas\n      const mesasPotenciales = todasLasMesas.filter(mesa => mesa.activa && (mesa.estado === 'cuenta_solicitada' || mesa.estado === 'ocupada'));\n      if (mesasPotenciales.length === 0) {\n        setMesasConCuentas([]);\n        setEstadisticas({\n          total_mesas: 0,\n          total_a_cobrar: 0,\n          promedio_cuenta: 0,\n          mesa_mayor: null\n        });\n        return;\n      }\n\n      // Verificar cuentas de forma optimizada\n      const mesasConCuentasData = await verificarCuentasMesas(mesasPotenciales);\n\n      // Aplicar filtros\n      let mesasFiltradas = mesasConCuentasData;\n      if (filtroMonto === 'menores') {\n        mesasFiltradas = mesasConCuentasData.filter(m => m.cuenta.resumen.total_general < 50);\n      } else if (filtroMonto === 'mayores') {\n        mesasFiltradas = mesasConCuentasData.filter(m => m.cuenta.resumen.total_general >= 50);\n      }\n\n      // âœ… ACTUALIZACIÃ“N SUAVE - Solo actualizar si hay cambios reales\n      const mesasActualesIds = mesasConCuentas.map(m => m.mesa.id).sort();\n      const nuevasMesasIds = mesasFiltradas.map(m => m.mesa.id).sort();\n      const hayDiferencias = JSON.stringify(mesasActualesIds) !== JSON.stringify(nuevasMesasIds) || mesasFiltradas.some((mesa, index) => {\n        const mesaActual = mesasConCuentas[index];\n        return !mesaActual || mesa.cuenta.resumen.total_general !== mesaActual.cuenta.resumen.total_general || mesa.mesa.estado !== mesaActual.mesa.estado;\n      });\n\n      // Solo actualizar si realmente hay cambios\n      if (hayDiferencias || mesasConCuentas.length === 0) {\n        setMesasConCuentas(mesasFiltradas);\n\n        // Calcular estadÃ­sticas solo si hay cambios\n        if (mesasConCuentasData.length > 0) {\n          const totalACobrar = mesasConCuentasData.reduce((sum, m) => sum + parseFloat(m.cuenta.resumen.total_general), 0);\n          const promedio = totalACobrar / mesasConCuentasData.length;\n          const mesaMayor = mesasConCuentasData.reduce((max, current) => parseFloat(current.cuenta.resumen.total_general) > parseFloat(max.cuenta.resumen.total_general) ? current : max);\n          setEstadisticas({\n            total_mesas: mesasConCuentasData.length,\n            total_a_cobrar: totalACobrar,\n            promedio_cuenta: promedio,\n            mesa_mayor: mesaMayor\n          });\n        } else {\n          setEstadisticas({\n            total_mesas: 0,\n            total_a_cobrar: 0,\n            promedio_cuenta: 0,\n            mesa_mayor: null\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching mesas con cuentas:', error);\n      // âœ… Solo mostrar error en actualizaciones manuales\n      if (esActualizacionManual) {\n        toast.error('Error al cargar las cuentas pendientes');\n      }\n    } finally {\n      if (esActualizacionManual) {\n        setLoading(false);\n      }\n    }\n  }, [filtroMonto, verificarCuentasMesas, mesasConCuentas]);\n\n  // ðŸ”Œ Configurar eventos de Socket.io\n  useEffect(() => {\n    if (!isConnected) return;\n\n    // Eventos de Socket.io con actualizaciÃ³n INMEDIATA\n    const handleNuevoPedido = data => {\n      var _data$mesa, _data$pedido, _data$pedido$mesa;\n      toast.success(`Nueva actividad en Mesa ${((_data$mesa = data.mesa) === null || _data$mesa === void 0 ? void 0 : _data$mesa.numero) || ((_data$pedido = data.pedido) === null || _data$pedido === void 0 ? void 0 : (_data$pedido$mesa = _data$pedido.mesa) === null || _data$pedido$mesa === void 0 ? void 0 : _data$pedido$mesa.numero)}`);\n      // âœ… ACTUALIZACIÃ“N INMEDIATA - Sin delays\n      fetchMesasConCuentas();\n    };\n    const handlePedidoListoCobrar = data => {\n      toast.success(`Mesa ${data.mesa} lista para cobrar - ${parseFloat(data.total).toFixed(2)}`);\n      // âœ… ACTUALIZACIÃ“N INMEDIATA\n      fetchMesasConCuentas();\n    };\n    const handleCuentaSolicitada = data => {\n      toast.success(`Mesa ${data.mesa} solicita la cuenta`);\n      // âœ… ACTUALIZACIÃ“N INMEDIATA\n      fetchMesasConCuentas();\n    };\n    const handleCuentaActualizada = data => {\n      var _data$mesa2, _data$mesa3;\n      toast.info(`Mesa ${(_data$mesa2 = data.mesa) === null || _data$mesa2 === void 0 ? void 0 : _data$mesa2.numero} actualizada. Nuevo total: ${parseFloat(data.nuevo_total).toFixed(2)}`);\n      if (cuentaSeleccionada && cuentaSeleccionada.mesa.id === ((_data$mesa3 = data.mesa) === null || _data$mesa3 === void 0 ? void 0 : _data$mesa3.id)) {\n        setShowPagoModal(false);\n        resetFormularioPago();\n        toast.info('Mesa actualizada. Vuelve a abrir la cuenta.');\n      }\n\n      // âœ… ACTUALIZACIÃ“N INMEDIATA\n      fetchMesasConCuentas();\n    };\n    const handleMesaLiberada = data => {\n      toast.success(`Mesa ${data.mesa} liberada - Pago procesado`);\n      // âœ… ACTUALIZACIÃ“N INMEDIATA\n      fetchMesasConCuentas();\n    };\n    const handleMesaEstadoActualizada = data => {\n      if (data.nuevo_estado === 'cuenta_solicitada' || data.nuevo_estado === 'libre') {\n        // âœ… ACTUALIZACIÃ“N INMEDIATA\n        fetchMesasConCuentas();\n      }\n    };\n    const handleActividadMesa = data => {\n      if (data.accion === 'nuevo_pedido') {\n        // âœ… ACTUALIZACIÃ“N INMEDIATA - Sin delays\n        fetchMesasConCuentas();\n      }\n    };\n    const handlePedidoEntregado = data => {\n      if (data.listo_para_cobrar) {\n        toast.success(`Mesa ${data.mesa} - Pedido entregado, listo para cobrar`);\n        // âœ… ACTUALIZACIÃ“N INMEDIATA\n        fetchMesasConCuentas();\n      }\n    };\n\n    // Registrar eventos\n    on('actividad-mesa', handleActividadMesa);\n    on('pedido-listo-para-cobrar', handlePedidoListoCobrar);\n    on('cuenta-solicitada', handleCuentaSolicitada);\n    on('cuenta-actualizada', handleCuentaActualizada);\n    on('mesa-liberada', handleMesaLiberada);\n    on('mesa-estado-actualizada', handleMesaEstadoActualizada);\n    on('pedido-entregado', handlePedidoEntregado);\n    on('nuevo-pedido', handleNuevoPedido);\n    on('pedido-creado', handleNuevoPedido);\n\n    // Solicitar actualizaciÃ³n\n    emit('solicitar-cuentas-pendientes');\n    return () => {\n      off('actividad-mesa', handleActividadMesa);\n      off('pedido-listo-para-cobrar', handlePedidoListoCobrar);\n      off('cuenta-solicitada', handleCuentaSolicitada);\n      off('cuenta-actualizada', handleCuentaActualizada);\n      off('mesa-liberada', handleMesaLiberada);\n      off('mesa-estado-actualizada', handleMesaEstadoActualizada);\n      off('pedido-entregado', handlePedidoEntregado);\n      off('nuevo-pedido', handleNuevoPedido);\n      off('pedido-creado', handleNuevoPedido);\n    };\n  }, [isConnected, on, off, emit, fetchMesasConCuentas, cuentaSeleccionada, resetFormularioPago]);\n  const handleVerCuentaDetalle = useCallback(mesaConCuenta => {\n    setCuentaSeleccionada(mesaConCuenta);\n    setShowPagoModal(true);\n    setMontoRecibido(mesaConCuenta.cuenta.resumen.total_general.toString());\n  }, []);\n  const handleProcesarPago = useCallback(async () => {\n    if (!cuentaSeleccionada) return;\n    const totalAPagar = parseFloat(cuentaSeleccionada.cuenta.resumen.total_general);\n    const montoRecibidoNum = parseFloat(montoRecibido);\n    if (metodoPago === 'efectivo' && montoRecibidoNum < totalAPagar) {\n      toast.error('El monto recibido es insuficiente');\n      return;\n    }\n    setProcesandoPago(true);\n    try {\n      await pedidosService.procesarPago(cuentaSeleccionada.mesa.id, {\n        metodo_pago: metodoPago,\n        monto_recibido: metodoPago === 'efectivo' ? montoRecibidoNum : totalAPagar,\n        observaciones_pago: observacionesPago\n      });\n      const cambio = metodoPago === 'efectivo' ? montoRecibidoNum - totalAPagar : 0;\n      if (emit) {\n        emit('pago-procesado', {\n          mesa: cuentaSeleccionada.mesa.numero,\n          total: totalAPagar,\n          metodoPago: metodoPago,\n          cambio: cambio\n        });\n      }\n      toast.success(`Pago procesado correctamente. ${cambio > 0 ? `Cambio: ${cambio.toFixed(2)}` : ''}`, {\n        duration: 6000\n      });\n      setShowPagoModal(false);\n      resetFormularioPago();\n\n      // âœ… ACTUALIZACIÃ“N SILENCIOSA despuÃ©s del pago\n      fetchMesasConCuentas(false);\n    } catch (error) {\n      console.error('Error processing payment:', error);\n      toast.error('Error al procesar el pago');\n    } finally {\n      setProcesandoPago(false);\n    }\n  }, [cuentaSeleccionada, metodoPago, montoRecibido, observacionesPago, resetFormularioPago, fetchMesasConCuentas, emit]);\n  const calcularCambio = useCallback(() => {\n    if (!cuentaSeleccionada || metodoPago !== 'efectivo') return 0;\n    const total = parseFloat(cuentaSeleccionada.cuenta.resumen.total_general);\n    const recibido = parseFloat(montoRecibido) || 0;\n    return Math.max(0, recibido - total);\n  }, [cuentaSeleccionada, metodoPago, montoRecibido]);\n\n  // âœ… ACTUALIZACIONES SUAVES Y NO VISIBLES\n  useEffect(() => {\n    // âœ… Carga inicial mÃ¡s rÃ¡pida - mostrar interfaz inmediatamente\n    setLoading(false); // No mostrar loading inicial\n    fetchMesasConCuentas(false); // Carga silenciosa desde el inicio\n\n    // âœ… ActualizaciÃ³n silenciosa cada 5 segundos\n    const interval = setInterval(() => {\n      fetchMesasConCuentas(false);\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [fetchMesasConCuentas]);\n\n  // âœ… Polling ultra rÃ¡pido cuando socket desconectado (sin loading visible) \n  useEffect(() => {\n    if (!isConnected) {\n      const ultraFastInterval = setInterval(() => {\n        fetchMesasConCuentas(false); // Silencioso\n      }, 2000);\n      return () => clearInterval(ultraFastInterval);\n    }\n  }, [isConnected, fetchMesasConCuentas]);\n\n  // âœ… ActualizaciÃ³n inmediata al enfocar ventana (sin loading)\n  useEffect(() => {\n    const handleFocus = () => {\n      fetchMesasConCuentas(false);\n    };\n    const handleVisibilityChange = () => {\n      if (!document.hidden) {\n        fetchMesasConCuentas(false);\n      }\n    };\n    window.addEventListener('focus', handleFocus);\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      window.removeEventListener('focus', handleFocus);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [fetchMesasConCuentas]);\n  if (loading && mesasConCuentas.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-5\",\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\",\n          variant: \"success\",\n          size: \"lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 h5\",\n          children: \"Verificando mesas...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-cash-register text-success me-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 33\n              }, this), \"Cuentas por Cobrar\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: \"Procesa los pagos de las mesas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(ButtonGroup, {\n              size: \"sm\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: filtroMonto === 'todos' ? 'success' : 'outline-success',\n                onClick: () => setFiltroMonto('todos'),\n                children: \"Todas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: filtroMonto === 'menores' ? 'success' : 'outline-success',\n                onClick: () => setFiltroMonto('menores'),\n                children: \"< $50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: filtroMonto === 'mayores' ? 'success' : 'outline-success',\n                onClick: () => setFiltroMonto('mayores'),\n                children: \"\\u2265 $50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-info\",\n              size: \"sm\",\n              onClick: () => {\n                // âœ… ACTUALIZACIÃ“N MANUAL con loading visible\n                fetchMesasConCuentas(true);\n              },\n              disabled: loading,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-sync-alt me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 33\n              }, this), loading ? 'Actualizando...' : 'Actualizar']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          className: \"mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0 shadow-sm bg-primary bg-opacity-10\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"text-center py-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-table fa-2x text-primary mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h3 mb-0 text-primary\",\n                  children: estadisticas.total_mesas\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"small text-muted\",\n                  children: \"Mesas Pendientes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0 shadow-sm bg-success bg-opacity-10\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"text-center py-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-dollar-sign fa-2x text-success mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h3 mb-0 text-success\",\n                  children: [\"$\", estadisticas.total_a_cobrar.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"small text-muted\",\n                  children: \"Total a Cobrar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 441,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0 shadow-sm bg-info bg-opacity-10\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"text-center py-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chart-line fa-2x text-info mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h3 mb-0 text-info\",\n                  children: [\"$\", estadisticas.promedio_cuenta.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"small text-muted\",\n                  children: \"Promedio por Mesa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: 3,\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              className: \"border-0 shadow-sm bg-warning bg-opacity-10\",\n              children: /*#__PURE__*/_jsxDEV(Card.Body, {\n                className: \"text-center py-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-crown fa-2x text-warning mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h3 mb-0 text-warning\",\n                  children: estadisticas.mesa_mayor ? `Mesa ${estadisticas.mesa_mayor.mesa.numero}` : 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"small text-muted\",\n                  children: \"Cuenta Mayor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 13\n    }, this), mesasConCuentas.length === 0 ? /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"border-0 shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"text-center py-5\",\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Spinner, {\n                animation: \"border\",\n                variant: \"success\",\n                className: \"mb-3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Verificando mesas...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-muted mb-0\",\n                children: \"Buscando cuentas pendientes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-check-circle fa-4x text-success mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"\\xA1No hay cuentas pendientes!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-muted mb-0\",\n                children: \"Todas las mesas est\\xE1n al d\\xEDa con sus pagos.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Row, {\n      children: mesasConCuentas.map(mesaConCuenta => /*#__PURE__*/_jsxDEV(Col, {\n        lg: 4,\n        md: 6,\n        className: \"mb-4\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"h-100 border-0 shadow-sm border-success border-2\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"bg-success text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"mb-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-table me-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 515,\n                    columnNumber: 49\n                  }, this), \"Mesa \", mesaConCuenta.mesa.numero]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"opacity-75\",\n                  children: [mesaConCuenta.mesa.capacidad, \" personas\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: mesaConCuenta.mesa.estado === 'cuenta_solicitada' ? 'warning' : 'info',\n                className: \"px-2 py-1\",\n                children: mesaConCuenta.mesa.estado === 'cuenta_solicitada' ? 'Cuenta Solicitada' : 'Ocupada'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 522,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between align-items-center mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  className: \"text-muted small\",\n                  children: \"RESUMEN:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"badge bg-light text-dark\",\n                  children: [mesaConCuenta.cuenta.resumen.total_pedidos, \" pedido(s)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-light p-3 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Items totales:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: mesaConCuenta.cuenta.resumen.total_items\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 545,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                  className: \"my-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between\",\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"TOTAL:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 549,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                    className: \"text-success h5 mb-0\",\n                    children: [\"$\", parseFloat(mesaConCuenta.cuenta.resumen.total_general).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"text-muted small\",\n                children: \"PRODUCTOS:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-1\",\n                children: [mesaConCuenta.cuenta.resumen.productos.slice(0, 3).map((producto, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between small\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"\\u2022 \", producto.producto.nombre]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-muted\",\n                    children: [producto.cantidad, \"x - $\", parseFloat(producto.subtotal).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 53\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 49\n                }, this)), mesaConCuenta.cuenta.resumen.productos.length > 3 && /*#__PURE__*/_jsxDEV(\"small\", {\n                  className: \"text-muted\",\n                  children: [\"+ \", mesaConCuenta.cuenta.resumen.productos.length - 3, \" productos m\\xE1s...\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"success\",\n                size: \"lg\",\n                onClick: () => handleVerCuentaDetalle(mesaConCuenta),\n                className: \"fw-bold\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-credit-card me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 45\n                }, this), \"Procesar Pago\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 577,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 29\n        }, this)\n      }, mesaConCuenta.mesa.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showPagoModal,\n      onHide: () => setShowPagoModal(false),\n      size: \"lg\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-cash-register me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 25\n          }, this), \"Procesar Pago - Mesa \", cuentaSeleccionada === null || cuentaSeleccionada === void 0 ? void 0 : cuentaSeleccionada.mesa.numero]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: cuentaSeleccionada && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-light p-3 rounded mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-3\",\n              children: \"Resumen de la Cuenta:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              size: \"sm\",\n              className: \"mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Producto\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 610,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Cant.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 611,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Precio\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 612,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Subtotal\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: cuentaSeleccionada.cuenta.resumen.productos.map((producto, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: producto.producto.nombre\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 619,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: producto.cantidad\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 620,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [\"$\", parseFloat(producto.producto.precio).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [\"$\", parseFloat(producto.subtotal).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 49\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 618,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"table-success\",\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    colSpan: \"3\",\n                    children: \"TOTAL:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 628,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: [\"$\", parseFloat(cuentaSeleccionada.cuenta.resumen.total_general).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 629,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 626,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"M\\xE9todo de Pago:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 638,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                  value: metodoPago,\n                  onChange: e => setMetodoPago(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"efectivo\",\n                    children: \"\\uD83D\\uDCB5 Efectivo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 643,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"tarjeta_debito\",\n                    children: \"\\uD83D\\uDCB3 Tarjeta de D\\xE9bito\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 644,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"tarjeta_credito\",\n                    children: \"\\uD83D\\uDCB3 Tarjeta de Cr\\xE9dito\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"transferencia\",\n                    children: \"\\uD83D\\uDCF1 Transferencia\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 646,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"yape\",\n                    children: \"\\uD83D\\uDCF1 Yape\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"plin\",\n                    children: \"\\uD83D\\uDCF1 Plin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"otro\",\n                    children: \"\\uD83D\\uDD04 Otro\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 649,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 33\n            }, this), metodoPago === 'efectivo' && /*#__PURE__*/_jsxDEV(Col, {\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Monto Recibido:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 657,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                    children: \"$\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 659,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"number\",\n                    step: \"0.01\",\n                    value: montoRecibido,\n                    onChange: e => setMontoRecibido(e.target.value),\n                    placeholder: \"0.00\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 660,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 29\n          }, this), metodoPago === 'efectivo' && montoRecibido && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-info mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-between align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-calculator me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 45\n                }, this), \"Cambio a entregar:\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"h4 mb-0 text-success\",\n                children: [\"$\", calcularCambio().toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 37\n            }, this), calcularCambio() < 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-danger small\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-exclamation-triangle me-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 45\n              }, this), \"El monto recibido es insuficiente\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Observaciones (opcional):\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 694,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 2,\n              value: observacionesPago,\n              onChange: e => setObservacionesPago(e.target.value),\n              placeholder: \"Notas adicionales sobre el pago...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => {\n            setShowPagoModal(false);\n            resetFormularioPago();\n          },\n          disabled: procesandoPago,\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"success\",\n          onClick: handleProcesarPago,\n          disabled: procesandoPago || metodoPago === 'efectivo' && (!montoRecibido || parseFloat(montoRecibido) < parseFloat((cuentaSeleccionada === null || cuentaSeleccionada === void 0 ? void 0 : cuentaSeleccionada.cuenta.resumen.total_general) || 0)),\n          size: \"lg\",\n          children: procesandoPago ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              size: \"sm\",\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 33\n            }, this), \"Procesando pago...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-check me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 33\n            }, this), \"Confirmar Pago\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 595,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 376,\n    columnNumber: 9\n  }, this);\n};\n_s(CuentasPendientes, \"megsGG9a1xa2p9LBjUYT86RF6LU=\", false, function () {\n  return [useSocket];\n});\n_c = CuentasPendientes;\nexport default CuentasPendientes;\nvar _c;\n$RefreshReg$(_c, \"CuentasPendientes\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","Container","Row","Col","Card","Badge","Button","Modal","Form","Table","Spinner","InputGroup","ButtonGroup","pedidosService","mesasService","useSocket","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","CuentasPendientes","_s","mesasConCuentas","setMesasConCuentas","loading","setLoading","showPagoModal","setShowPagoModal","cuentaSeleccionada","setCuentaSeleccionada","metodoPago","setMetodoPago","montoRecibido","setMontoRecibido","observacionesPago","setObservacionesPago","procesandoPago","setProcesandoPago","filtroMonto","setFiltroMonto","estadisticas","setEstadisticas","total_mesas","total_a_cobrar","promedio_cuenta","mesa_mayor","isConnected","on","off","emit","resetFormularioPago","verificarCuentasMesas","mesas","mesasConCuentasData","mesasCandidatas","filter","mesa","estado","promesasTodasLasMesas","map","cuentaResponse","getCuenta","id","cuenta","data","error","resultados","Promise","all","forEach","resultado","push","fetchMesasConCuentas","esActualizacionManual","mesasResponse","getAll","todasLasMesas","mesasPotenciales","activa","length","mesasFiltradas","m","resumen","total_general","mesasActualesIds","sort","nuevasMesasIds","hayDiferencias","JSON","stringify","some","index","mesaActual","totalACobrar","reduce","sum","parseFloat","promedio","mesaMayor","max","current","console","handleNuevoPedido","_data$mesa","_data$pedido","_data$pedido$mesa","success","numero","pedido","handlePedidoListoCobrar","total","toFixed","handleCuentaSolicitada","handleCuentaActualizada","_data$mesa2","_data$mesa3","info","nuevo_total","handleMesaLiberada","handleMesaEstadoActualizada","nuevo_estado","handleActividadMesa","accion","handlePedidoEntregado","listo_para_cobrar","handleVerCuentaDetalle","mesaConCuenta","toString","handleProcesarPago","totalAPagar","montoRecibidoNum","procesarPago","metodo_pago","monto_recibido","observaciones_pago","cambio","duration","calcularCambio","recibido","Math","interval","setInterval","clearInterval","ultraFastInterval","handleFocus","handleVisibilityChange","document","hidden","window","addEventListener","removeEventListener","children","className","animation","variant","size","fileName","_jsxFileName","lineNumber","columnNumber","fluid","onClick","disabled","md","Body","lg","Header","capacidad","bg","total_pedidos","total_items","productos","slice","producto","nombre","cantidad","subtotal","show","onHide","closeButton","Title","precio","colSpan","Group","Label","Select","value","onChange","e","target","Text","Control","type","step","placeholder","as","rows","Footer","_c","$RefreshReg$"],"sources":["D:/Proyecto-Silva-SIRER/sirer-project/frontend/src/components/cajero/CuentasPendientes.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n    Container, Row, Col, Card, Badge, Button, Modal, \r\n    Form, Table, Spinner, InputGroup, ButtonGroup\r\n} from 'react-bootstrap';\r\nimport { pedidosService, mesasService } from '../../services/api';\r\nimport { useSocket } from '../../context/SocketContext';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst CuentasPendientes = () => {\r\n    const [mesasConCuentas, setMesasConCuentas] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showPagoModal, setShowPagoModal] = useState(false);\r\n    const [cuentaSeleccionada, setCuentaSeleccionada] = useState(null);\r\n    const [metodoPago, setMetodoPago] = useState('efectivo');\r\n    const [montoRecibido, setMontoRecibido] = useState('');\r\n    const [observacionesPago, setObservacionesPago] = useState('');\r\n    const [procesandoPago, setProcesandoPago] = useState(false);\r\n    const [filtroMonto, setFiltroMonto] = useState('todos');\r\n    const [estadisticas, setEstadisticas] = useState({\r\n        total_mesas: 0,\r\n        total_a_cobrar: 0,\r\n        promedio_cuenta: 0,\r\n        mesa_mayor: null\r\n    });\r\n\r\n    // ðŸ”Œ Hook de Socket.io\r\n    const { isConnected, on, off, emit } = useSocket();\r\n\r\n    const resetFormularioPago = useCallback(() => {\r\n        setCuentaSeleccionada(null);\r\n        setMetodoPago('efectivo');\r\n        setMontoRecibido('');\r\n        setObservacionesPago('');\r\n    }, []);\r\n\r\n    const verificarCuentasMesas = useCallback(async (mesas) => {\r\n        const mesasConCuentasData = [];\r\n        \r\n        // Filtrar mesas que podrÃ­an tener cuentas pendientes\r\n        const mesasCandidatas = mesas.filter(mesa => \r\n            mesa.estado === 'cuenta_solicitada' || mesa.estado === 'ocupada'\r\n        );\r\n\r\n        // âœ… PROCESAMIENTO PARALELO MASIVO - Sin esperas entre lotes\r\n        const promesasTodasLasMesas = mesasCandidatas.map(async (mesa) => {\r\n            try {\r\n                const cuentaResponse = await pedidosService.getCuenta(mesa.id);\r\n                return {\r\n                    mesa,\r\n                    cuenta: cuentaResponse.data.data\r\n                };\r\n            } catch (error) {\r\n                return null; // Mesa sin cuenta pendiente\r\n            }\r\n        });\r\n\r\n        // âœ… EJECUTAR TODAS LAS CONSULTAS AL MISMO TIEMPO\r\n        const resultados = await Promise.all(promesasTodasLasMesas);\r\n        \r\n        // Filtrar solo las mesas con cuentas vÃ¡lidas\r\n        resultados.forEach(resultado => {\r\n            if (resultado) {\r\n                mesasConCuentasData.push(resultado);\r\n            }\r\n        });\r\n\r\n        return mesasConCuentasData;\r\n    }, []);\r\n\r\n    const fetchMesasConCuentas = useCallback(async (esActualizacionManual = false) => {\r\n        // âœ… NO mostrar loading en actualizaciones automÃ¡ticas\r\n        \r\n        try {\r\n            if (esActualizacionManual) {\r\n                setLoading(true);\r\n            }\r\n            \r\n            // Obtener todas las mesas activas\r\n            const mesasResponse = await mesasService.getAll();\r\n            const todasLasMesas = mesasResponse.data.data;\r\n            \r\n            // Filtrar mesas activas que podrÃ­an tener cuentas\r\n            const mesasPotenciales = todasLasMesas.filter(mesa => \r\n                mesa.activa && (mesa.estado === 'cuenta_solicitada' || mesa.estado === 'ocupada')\r\n            );\r\n\r\n            if (mesasPotenciales.length === 0) {\r\n                setMesasConCuentas([]);\r\n                setEstadisticas({\r\n                    total_mesas: 0,\r\n                    total_a_cobrar: 0,\r\n                    promedio_cuenta: 0,\r\n                    mesa_mayor: null\r\n                });\r\n                return;\r\n            }\r\n\r\n            // Verificar cuentas de forma optimizada\r\n            const mesasConCuentasData = await verificarCuentasMesas(mesasPotenciales);\r\n\r\n            // Aplicar filtros\r\n            let mesasFiltradas = mesasConCuentasData;\r\n            if (filtroMonto === 'menores') {\r\n                mesasFiltradas = mesasConCuentasData.filter(m => m.cuenta.resumen.total_general < 50);\r\n            } else if (filtroMonto === 'mayores') {\r\n                mesasFiltradas = mesasConCuentasData.filter(m => m.cuenta.resumen.total_general >= 50);\r\n            }\r\n\r\n            // âœ… ACTUALIZACIÃ“N SUAVE - Solo actualizar si hay cambios reales\r\n            const mesasActualesIds = mesasConCuentas.map(m => m.mesa.id).sort();\r\n            const nuevasMesasIds = mesasFiltradas.map(m => m.mesa.id).sort();\r\n            \r\n            const hayDiferencias = JSON.stringify(mesasActualesIds) !== JSON.stringify(nuevasMesasIds) ||\r\n                mesasFiltradas.some((mesa, index) => {\r\n                    const mesaActual = mesasConCuentas[index];\r\n                    return !mesaActual || \r\n                           mesa.cuenta.resumen.total_general !== mesaActual.cuenta.resumen.total_general ||\r\n                           mesa.mesa.estado !== mesaActual.mesa.estado;\r\n                });\r\n\r\n            // Solo actualizar si realmente hay cambios\r\n            if (hayDiferencias || mesasConCuentas.length === 0) {\r\n                setMesasConCuentas(mesasFiltradas);\r\n\r\n                // Calcular estadÃ­sticas solo si hay cambios\r\n                if (mesasConCuentasData.length > 0) {\r\n                    const totalACobrar = mesasConCuentasData.reduce((sum, m) => \r\n                        sum + parseFloat(m.cuenta.resumen.total_general), 0\r\n                    );\r\n                    const promedio = totalACobrar / mesasConCuentasData.length;\r\n                    const mesaMayor = mesasConCuentasData.reduce((max, current) => \r\n                        parseFloat(current.cuenta.resumen.total_general) > parseFloat(max.cuenta.resumen.total_general) \r\n                            ? current : max\r\n                    );\r\n\r\n                    setEstadisticas({\r\n                        total_mesas: mesasConCuentasData.length,\r\n                        total_a_cobrar: totalACobrar,\r\n                        promedio_cuenta: promedio,\r\n                        mesa_mayor: mesaMayor\r\n                    });\r\n                } else {\r\n                    setEstadisticas({\r\n                        total_mesas: 0,\r\n                        total_a_cobrar: 0,\r\n                        promedio_cuenta: 0,\r\n                        mesa_mayor: null\r\n                    });\r\n                }\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('Error fetching mesas con cuentas:', error);\r\n            // âœ… Solo mostrar error en actualizaciones manuales\r\n            if (esActualizacionManual) {\r\n                toast.error('Error al cargar las cuentas pendientes');\r\n            }\r\n        } finally {\r\n            if (esActualizacionManual) {\r\n                setLoading(false);\r\n            }\r\n        }\r\n    }, [filtroMonto, verificarCuentasMesas, mesasConCuentas]);\r\n\r\n    // ðŸ”Œ Configurar eventos de Socket.io\r\n    useEffect(() => {\r\n        if (!isConnected) return;\r\n\r\n        // Eventos de Socket.io con actualizaciÃ³n INMEDIATA\r\n        const handleNuevoPedido = (data) => {\r\n            toast.success(`Nueva actividad en Mesa ${data.mesa?.numero || data.pedido?.mesa?.numero}`);\r\n            // âœ… ACTUALIZACIÃ“N INMEDIATA - Sin delays\r\n            fetchMesasConCuentas();\r\n        };\r\n\r\n        const handlePedidoListoCobrar = (data) => {\r\n            toast.success(`Mesa ${data.mesa} lista para cobrar - ${parseFloat(data.total).toFixed(2)}`);\r\n            // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n            fetchMesasConCuentas();\r\n        };\r\n\r\n        const handleCuentaSolicitada = (data) => {\r\n            toast.success(`Mesa ${data.mesa} solicita la cuenta`);\r\n            // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n            fetchMesasConCuentas();\r\n        };\r\n\r\n        const handleCuentaActualizada = (data) => {\r\n            toast.info(`Mesa ${data.mesa?.numero} actualizada. Nuevo total: ${parseFloat(data.nuevo_total).toFixed(2)}`);\r\n            \r\n            if (cuentaSeleccionada && cuentaSeleccionada.mesa.id === data.mesa?.id) {\r\n                setShowPagoModal(false);\r\n                resetFormularioPago();\r\n                toast.info('Mesa actualizada. Vuelve a abrir la cuenta.');\r\n            }\r\n            \r\n            // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n            fetchMesasConCuentas();\r\n        };\r\n\r\n        const handleMesaLiberada = (data) => {\r\n            toast.success(`Mesa ${data.mesa} liberada - Pago procesado`);\r\n            // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n            fetchMesasConCuentas();\r\n        };\r\n\r\n        const handleMesaEstadoActualizada = (data) => {\r\n            if (data.nuevo_estado === 'cuenta_solicitada' || data.nuevo_estado === 'libre') {\r\n                // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n                fetchMesasConCuentas();\r\n            }\r\n        };\r\n\r\n        const handleActividadMesa = (data) => {\r\n            if (data.accion === 'nuevo_pedido') {\r\n                // âœ… ACTUALIZACIÃ“N INMEDIATA - Sin delays\r\n                fetchMesasConCuentas();\r\n            }\r\n        };\r\n\r\n        const handlePedidoEntregado = (data) => {\r\n            if (data.listo_para_cobrar) {\r\n                toast.success(`Mesa ${data.mesa} - Pedido entregado, listo para cobrar`);\r\n                // âœ… ACTUALIZACIÃ“N INMEDIATA\r\n                fetchMesasConCuentas();\r\n            }\r\n        };\r\n\r\n        // Registrar eventos\r\n        on('actividad-mesa', handleActividadMesa);\r\n        on('pedido-listo-para-cobrar', handlePedidoListoCobrar);\r\n        on('cuenta-solicitada', handleCuentaSolicitada);\r\n        on('cuenta-actualizada', handleCuentaActualizada);\r\n        on('mesa-liberada', handleMesaLiberada);\r\n        on('mesa-estado-actualizada', handleMesaEstadoActualizada);\r\n        on('pedido-entregado', handlePedidoEntregado);\r\n        on('nuevo-pedido', handleNuevoPedido);\r\n        on('pedido-creado', handleNuevoPedido);\r\n\r\n        // Solicitar actualizaciÃ³n\r\n        emit('solicitar-cuentas-pendientes');\r\n\r\n        return () => {\r\n            off('actividad-mesa', handleActividadMesa);\r\n            off('pedido-listo-para-cobrar', handlePedidoListoCobrar);\r\n            off('cuenta-solicitada', handleCuentaSolicitada);\r\n            off('cuenta-actualizada', handleCuentaActualizada);\r\n            off('mesa-liberada', handleMesaLiberada);\r\n            off('mesa-estado-actualizada', handleMesaEstadoActualizada);\r\n            off('pedido-entregado', handlePedidoEntregado);\r\n            off('nuevo-pedido', handleNuevoPedido);\r\n            off('pedido-creado', handleNuevoPedido);\r\n        };\r\n    }, [isConnected, on, off, emit, fetchMesasConCuentas, cuentaSeleccionada, resetFormularioPago]);\r\n\r\n    const handleVerCuentaDetalle = useCallback((mesaConCuenta) => {\r\n        setCuentaSeleccionada(mesaConCuenta);\r\n        setShowPagoModal(true);\r\n        setMontoRecibido(mesaConCuenta.cuenta.resumen.total_general.toString());\r\n    }, []);\r\n\r\n    const handleProcesarPago = useCallback(async () => {\r\n        if (!cuentaSeleccionada) return;\r\n\r\n        const totalAPagar = parseFloat(cuentaSeleccionada.cuenta.resumen.total_general);\r\n        const montoRecibidoNum = parseFloat(montoRecibido);\r\n\r\n        if (metodoPago === 'efectivo' && montoRecibidoNum < totalAPagar) {\r\n            toast.error('El monto recibido es insuficiente');\r\n            return;\r\n        }\r\n\r\n        setProcesandoPago(true);\r\n        try {\r\n            await pedidosService.procesarPago(cuentaSeleccionada.mesa.id, {\r\n                metodo_pago: metodoPago,\r\n                monto_recibido: metodoPago === 'efectivo' ? montoRecibidoNum : totalAPagar,\r\n                observaciones_pago: observacionesPago\r\n            });\r\n\r\n            const cambio = metodoPago === 'efectivo' ? montoRecibidoNum - totalAPagar : 0;\r\n            \r\n            if (emit) {\r\n                emit('pago-procesado', {\r\n                    mesa: cuentaSeleccionada.mesa.numero,\r\n                    total: totalAPagar,\r\n                    metodoPago: metodoPago,\r\n                    cambio: cambio\r\n                });\r\n            }\r\n            \r\n            toast.success(\r\n                `Pago procesado correctamente. ${cambio > 0 ? `Cambio: ${cambio.toFixed(2)}` : ''}`,\r\n                { duration: 6000 }\r\n            );\r\n\r\n            setShowPagoModal(false);\r\n            resetFormularioPago();\r\n            \r\n            // âœ… ACTUALIZACIÃ“N SILENCIOSA despuÃ©s del pago\r\n            fetchMesasConCuentas(false);\r\n\r\n        } catch (error) {\r\n            console.error('Error processing payment:', error);\r\n            toast.error('Error al procesar el pago');\r\n        } finally {\r\n            setProcesandoPago(false);\r\n        }\r\n    }, [cuentaSeleccionada, metodoPago, montoRecibido, observacionesPago, resetFormularioPago, fetchMesasConCuentas, emit]);\r\n\r\n    const calcularCambio = useCallback(() => {\r\n        if (!cuentaSeleccionada || metodoPago !== 'efectivo') return 0;\r\n        const total = parseFloat(cuentaSeleccionada.cuenta.resumen.total_general);\r\n        const recibido = parseFloat(montoRecibido) || 0;\r\n        return Math.max(0, recibido - total);\r\n    }, [cuentaSeleccionada, metodoPago, montoRecibido]);\r\n\r\n    // âœ… ACTUALIZACIONES SUAVES Y NO VISIBLES\r\n    useEffect(() => {\r\n        // âœ… Carga inicial mÃ¡s rÃ¡pida - mostrar interfaz inmediatamente\r\n        setLoading(false); // No mostrar loading inicial\r\n        fetchMesasConCuentas(false); // Carga silenciosa desde el inicio\r\n        \r\n        // âœ… ActualizaciÃ³n silenciosa cada 5 segundos\r\n        const interval = setInterval(() => {\r\n            fetchMesasConCuentas(false);\r\n        }, 5000);\r\n        \r\n        return () => clearInterval(interval);\r\n    }, [fetchMesasConCuentas]);\r\n\r\n    // âœ… Polling ultra rÃ¡pido cuando socket desconectado (sin loading visible) \r\n    useEffect(() => {\r\n        if (!isConnected) {\r\n            const ultraFastInterval = setInterval(() => {\r\n                fetchMesasConCuentas(false); // Silencioso\r\n            }, 2000);\r\n            return () => clearInterval(ultraFastInterval);\r\n        }\r\n    }, [isConnected, fetchMesasConCuentas]);\r\n\r\n    // âœ… ActualizaciÃ³n inmediata al enfocar ventana (sin loading)\r\n    useEffect(() => {\r\n        const handleFocus = () => {\r\n            fetchMesasConCuentas(false);\r\n        };\r\n\r\n        const handleVisibilityChange = () => {\r\n            if (!document.hidden) {\r\n                fetchMesasConCuentas(false);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('focus', handleFocus);\r\n        document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n        return () => {\r\n            window.removeEventListener('focus', handleFocus);\r\n            document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n        };\r\n    }, [fetchMesasConCuentas]);\r\n\r\n    if (loading && mesasConCuentas.length === 0) {\r\n        return (\r\n            <Container>\r\n                <div className=\"text-center py-5\">\r\n                    <Spinner animation=\"border\" variant=\"success\" size=\"lg\" />\r\n                    <p className=\"mt-3 h5\">Verificando mesas...</p>\r\n                </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container fluid>\r\n            {/* Header limpio */}\r\n            <Row className=\"mb-4\">\r\n                <Col>\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                        <div>\r\n                            <h2 className=\"mb-1\">\r\n                                <i className=\"fas fa-cash-register text-success me-2\"></i>\r\n                                Cuentas por Cobrar\r\n                            </h2>\r\n                            <p className=\"text-muted mb-0\">\r\n                                Procesa los pagos de las mesas\r\n                            </p>\r\n                        </div>\r\n                        \r\n                        <div className=\"d-flex gap-2\">\r\n                            <ButtonGroup size=\"sm\">\r\n                                <Button \r\n                                    variant={filtroMonto === 'todos' ? 'success' : 'outline-success'}\r\n                                    onClick={() => setFiltroMonto('todos')}\r\n                                >\r\n                                    Todas\r\n                                </Button>\r\n                                <Button \r\n                                    variant={filtroMonto === 'menores' ? 'success' : 'outline-success'}\r\n                                    onClick={() => setFiltroMonto('menores')}\r\n                                >\r\n                                    &lt; $50\r\n                                </Button>\r\n                                <Button \r\n                                    variant={filtroMonto === 'mayores' ? 'success' : 'outline-success'}\r\n                                    onClick={() => setFiltroMonto('mayores')}\r\n                                >\r\n                                    â‰¥ $50\r\n                                </Button>\r\n                            </ButtonGroup>\r\n                            \r\n                            <Button \r\n                                variant=\"outline-info\" \r\n                                size=\"sm\"\r\n                                onClick={() => {\r\n                                    // âœ… ACTUALIZACIÃ“N MANUAL con loading visible\r\n                                    fetchMesasConCuentas(true);\r\n                                }}\r\n                                disabled={loading}\r\n                            >\r\n                                <i className=\"fas fa-sync-alt me-1\"></i>\r\n                                {loading ? 'Actualizando...' : 'Actualizar'}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* EstadÃ­sticas limpias */}\r\n                    <Row className=\"mt-3\">\r\n                        <Col md={3}>\r\n                            <Card className=\"border-0 shadow-sm bg-primary bg-opacity-10\">\r\n                                <Card.Body className=\"text-center py-3\">\r\n                                    <i className=\"fas fa-table fa-2x text-primary mb-2\"></i>\r\n                                    <div className=\"h3 mb-0 text-primary\">{estadisticas.total_mesas}</div>\r\n                                    <div className=\"small text-muted\">Mesas Pendientes</div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col md={3}>\r\n                            <Card className=\"border-0 shadow-sm bg-success bg-opacity-10\">\r\n                                <Card.Body className=\"text-center py-3\">\r\n                                    <i className=\"fas fa-dollar-sign fa-2x text-success mb-2\"></i>\r\n                                    <div className=\"h3 mb-0 text-success\">\r\n                                        ${estadisticas.total_a_cobrar.toFixed(2)}\r\n                                    </div>\r\n                                    <div className=\"small text-muted\">Total a Cobrar</div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col md={3}>\r\n                            <Card className=\"border-0 shadow-sm bg-info bg-opacity-10\">\r\n                                <Card.Body className=\"text-center py-3\">\r\n                                    <i className=\"fas fa-chart-line fa-2x text-info mb-2\"></i>\r\n                                    <div className=\"h3 mb-0 text-info\">\r\n                                        ${estadisticas.promedio_cuenta.toFixed(2)}\r\n                                    </div>\r\n                                    <div className=\"small text-muted\">Promedio por Mesa</div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                        <Col md={3}>\r\n                            <Card className=\"border-0 shadow-sm bg-warning bg-opacity-10\">\r\n                                <Card.Body className=\"text-center py-3\">\r\n                                    <i className=\"fas fa-crown fa-2x text-warning mb-2\"></i>\r\n                                    <div className=\"h3 mb-0 text-warning\">\r\n                                        {estadisticas.mesa_mayor ? \r\n                                            `Mesa ${estadisticas.mesa_mayor.mesa.numero}` : \r\n                                            'N/A'\r\n                                        }\r\n                                    </div>\r\n                                    <div className=\"small text-muted\">Cuenta Mayor</div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                    </Row>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/* Lista de cuentas - diseÃ±o limpio */}\r\n            {mesasConCuentas.length === 0 ? (\r\n                <Row>\r\n                    <Col>\r\n                        <Card className=\"border-0 shadow-sm\">\r\n                            <Card.Body className=\"text-center py-5\">\r\n                                {loading ? (\r\n                                    <>\r\n                                        <Spinner animation=\"border\" variant=\"success\" className=\"mb-3\" />\r\n                                        <h5>Verificando mesas...</h5>\r\n                                        <p className=\"text-muted mb-0\">\r\n                                            Buscando cuentas pendientes\r\n                                        </p>\r\n                                    </>\r\n                                ) : (\r\n                                    <>\r\n                                        <i className=\"fas fa-check-circle fa-4x text-success mb-4\"></i>\r\n                                        <h4>Â¡No hay cuentas pendientes!</h4>\r\n                                        <p className=\"text-muted mb-0\">\r\n                                            Todas las mesas estÃ¡n al dÃ­a con sus pagos.\r\n                                        </p>\r\n                                    </>\r\n                                )}\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            ) : (\r\n                <Row>\r\n                    {mesasConCuentas.map((mesaConCuenta) => (\r\n                        <Col lg={4} md={6} key={mesaConCuenta.mesa.id} className=\"mb-4\">\r\n                            <Card className=\"h-100 border-0 shadow-sm border-success border-2\">\r\n                                <Card.Header className=\"bg-success text-white\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                                        <div>\r\n                                            <h5 className=\"mb-0\">\r\n                                                <i className=\"fas fa-table me-2\"></i>\r\n                                                Mesa {mesaConCuenta.mesa.numero}\r\n                                            </h5>\r\n                                            <small className=\"opacity-75\">\r\n                                                {mesaConCuenta.mesa.capacidad} personas\r\n                                            </small>\r\n                                        </div>\r\n                                        <Badge \r\n                                            bg={mesaConCuenta.mesa.estado === 'cuenta_solicitada' ? 'warning' : 'info'}\r\n                                            className=\"px-2 py-1\"\r\n                                        >\r\n                                            {mesaConCuenta.mesa.estado === 'cuenta_solicitada' ? \r\n                                                'Cuenta Solicitada' : 'Ocupada'\r\n                                            }\r\n                                        </Badge>\r\n                                    </div>\r\n                                </Card.Header>\r\n\r\n                                <Card.Body>\r\n                                    <div className=\"mb-3\">\r\n                                        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n                                            <strong className=\"text-muted small\">RESUMEN:</strong>\r\n                                            <span className=\"badge bg-light text-dark\">\r\n                                                {mesaConCuenta.cuenta.resumen.total_pedidos} pedido(s)\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <div className=\"bg-light p-3 rounded\">\r\n                                            <div className=\"d-flex justify-content-between mb-1\">\r\n                                                <span>Items totales:</span>\r\n                                                <span>{mesaConCuenta.cuenta.resumen.total_items}</span>\r\n                                            </div>\r\n                                            <hr className=\"my-2\" />\r\n                                            <div className=\"d-flex justify-content-between\">\r\n                                                <strong>TOTAL:</strong>\r\n                                                <strong className=\"text-success h5 mb-0\">\r\n                                                    ${parseFloat(mesaConCuenta.cuenta.resumen.total_general).toFixed(2)}\r\n                                                </strong>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mb-3\">\r\n                                        <strong className=\"text-muted small\">PRODUCTOS:</strong>\r\n                                        <div className=\"mt-1\">\r\n                                            {mesaConCuenta.cuenta.resumen.productos.slice(0, 3).map((producto, index) => (\r\n                                                <div key={index} className=\"d-flex justify-content-between small\">\r\n                                                    <span>â€¢ {producto.producto.nombre}</span>\r\n                                                    <span className=\"text-muted\">\r\n                                                        {producto.cantidad}x - ${parseFloat(producto.subtotal).toFixed(2)}\r\n                                                    </span>\r\n                                                </div>\r\n                                            ))}\r\n                                            {mesaConCuenta.cuenta.resumen.productos.length > 3 && (\r\n                                                <small className=\"text-muted\">\r\n                                                    + {mesaConCuenta.cuenta.resumen.productos.length - 3} productos mÃ¡s...\r\n                                                </small>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"d-grid\">\r\n                                        <Button\r\n                                            variant=\"success\"\r\n                                            size=\"lg\"\r\n                                            onClick={() => handleVerCuentaDetalle(mesaConCuenta)}\r\n                                            className=\"fw-bold\"\r\n                                        >\r\n                                            <i className=\"fas fa-credit-card me-2\"></i>\r\n                                            Procesar Pago\r\n                                        </Button>\r\n                                    </div>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        </Col>\r\n                    ))}\r\n                </Row>\r\n            )}\r\n\r\n            {/* Modal de procesamiento de pago - diseÃ±o limpio */}\r\n            <Modal show={showPagoModal} onHide={() => setShowPagoModal(false)} size=\"lg\">\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>\r\n                        <i className=\"fas fa-cash-register me-2\"></i>\r\n                        Procesar Pago - Mesa {cuentaSeleccionada?.mesa.numero}\r\n                    </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    {cuentaSeleccionada && (\r\n                        <>\r\n                            <div className=\"bg-light p-3 rounded mb-4\">\r\n                                <h6 className=\"mb-3\">Resumen de la Cuenta:</h6>\r\n                                <Table size=\"sm\" className=\"mb-0\">\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th>Producto</th>\r\n                                            <th>Cant.</th>\r\n                                            <th>Precio</th>\r\n                                            <th>Subtotal</th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {cuentaSeleccionada.cuenta.resumen.productos.map((producto, index) => (\r\n                                            <tr key={index}>\r\n                                                <td>{producto.producto.nombre}</td>\r\n                                                <td>{producto.cantidad}</td>\r\n                                                <td>${parseFloat(producto.producto.precio).toFixed(2)}</td>\r\n                                                <td>${parseFloat(producto.subtotal).toFixed(2)}</td>\r\n                                            </tr>\r\n                                        ))}\r\n                                    </tbody>\r\n                                    <tfoot>\r\n                                        <tr className=\"table-success\">\r\n                                            <th colSpan=\"3\">TOTAL:</th>\r\n                                            <th>${parseFloat(cuentaSeleccionada.cuenta.resumen.total_general).toFixed(2)}</th>\r\n                                        </tr>\r\n                                    </tfoot>\r\n                                </Table>\r\n                            </div>\r\n\r\n                            <Row>\r\n                                <Col md={6}>\r\n                                    <Form.Group className=\"mb-3\">\r\n                                        <Form.Label><strong>MÃ©todo de Pago:</strong></Form.Label>\r\n                                        <Form.Select\r\n                                            value={metodoPago}\r\n                                            onChange={(e) => setMetodoPago(e.target.value)}\r\n                                        >\r\n                                            <option value=\"efectivo\">ðŸ’µ Efectivo</option>\r\n                                            <option value=\"tarjeta_debito\">ðŸ’³ Tarjeta de DÃ©bito</option>\r\n                                            <option value=\"tarjeta_credito\">ðŸ’³ Tarjeta de CrÃ©dito</option>\r\n                                            <option value=\"transferencia\">ðŸ“± Transferencia</option>\r\n                                            <option value=\"yape\">ðŸ“± Yape</option>\r\n                                            <option value=\"plin\">ðŸ“± Plin</option>\r\n                                            <option value=\"otro\">ðŸ”„ Otro</option>\r\n                                        </Form.Select>\r\n                                    </Form.Group>\r\n                                </Col>\r\n                                \r\n                                {metodoPago === 'efectivo' && (\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label><strong>Monto Recibido:</strong></Form.Label>\r\n                                            <InputGroup>\r\n                                                <InputGroup.Text>$</InputGroup.Text>\r\n                                                <Form.Control\r\n                                                    type=\"number\"\r\n                                                    step=\"0.01\"\r\n                                                    value={montoRecibido}\r\n                                                    onChange={(e) => setMontoRecibido(e.target.value)}\r\n                                                    placeholder=\"0.00\"\r\n                                                />\r\n                                            </InputGroup>\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                )}\r\n                            </Row>\r\n\r\n                            {metodoPago === 'efectivo' && montoRecibido && (\r\n                                <div className=\"alert alert-info mb-3\">\r\n                                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                                        <strong>\r\n                                            <i className=\"fas fa-calculator me-2\"></i>\r\n                                            Cambio a entregar:\r\n                                        </strong>\r\n                                        <span className=\"h4 mb-0 text-success\">\r\n                                            ${calcularCambio().toFixed(2)}\r\n                                        </span>\r\n                                    </div>\r\n                                    {calcularCambio() < 0 && (\r\n                                        <div className=\"mt-2 text-danger small\">\r\n                                            <i className=\"fas fa-exclamation-triangle me-1\"></i>\r\n                                            El monto recibido es insuficiente\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label><strong>Observaciones (opcional):</strong></Form.Label>\r\n                                <Form.Control\r\n                                    as=\"textarea\"\r\n                                    rows={2}\r\n                                    value={observacionesPago}\r\n                                    onChange={(e) => setObservacionesPago(e.target.value)}\r\n                                    placeholder=\"Notas adicionales sobre el pago...\"\r\n                                />\r\n                            </Form.Group>\r\n                        </>\r\n                    )}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button \r\n                        variant=\"secondary\" \r\n                        onClick={() => {\r\n                            setShowPagoModal(false);\r\n                            resetFormularioPago();\r\n                        }}\r\n                        disabled={procesandoPago}\r\n                    >\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button \r\n                        variant=\"success\" \r\n                        onClick={handleProcesarPago}\r\n                        disabled={\r\n                            procesandoPago || \r\n                            (metodoPago === 'efectivo' && (!montoRecibido || parseFloat(montoRecibido) < parseFloat(cuentaSeleccionada?.cuenta.resumen.total_general || 0)))\r\n                        }\r\n                        size=\"lg\"\r\n                    >\r\n                        {procesandoPago ? (\r\n                            <>\r\n                                <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                                Procesando pago...\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <i className=\"fas fa-check me-2\"></i>\r\n                                Confirmar Pago\r\n                            </>\r\n                        )}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default CuentasPendientes;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}